<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>Simulador de DPU</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; }
    .main-container { max-width: 1400px; margin: 0 auto; }
    .header { text-align: center; color: white; margin-bottom: 30px; animation: fadeInDown 0.6s ease; }
    .header h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
    .header p { font-size: 1.1rem; opacity: 0.9; }
    .content-wrapper { display: grid; grid-template-columns: 1fr 1.5fr; gap: 25px; align-items: start; }
    .card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 20px; padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); animation: fadeInUp 0.6s ease; }
    .chart-card { height: auto; }
    .chart-title { font-size: 1.3rem; font-weight: 600; color: #333; margin-bottom: 20px; text-align: center; }
    .action-buttons { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 30px; }
    .btn-modern { flex: 1; padding: 15px; border: none; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 0.5px; }
    .btn-add { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
    .btn-add:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4); }
    .btn-process { background: linear-gradient(135deg, #11998e, #38ef7d); color: white; }
    .btn-process:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(56, 239, 125, 0.4); }
    .btn-reset { background: linear-gradient(135deg, #ee0979, #ff6a00); color: white; }
    .btn-reset:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(255, 106, 0, 0.4); }
    .processors-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
    .processor-card { border-radius: 15px; padding: 20px; min-height: 300px; position: relative; overflow: hidden; }
    .processor-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, rgba(255,255,255,0.5), rgba(255,255,255,0.1)); }
    .cpu-card { background: linear-gradient(135deg, #11998e, #38ef7d); color: white; }
    .dpu-card { background: linear-gradient(135deg, #ee0979, #ff6a00); color: white; }
    .processor-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 15px; text-align: center; text-transform: uppercase; letter-spacing: 2px; }
    .task-item { background: rgba(255, 255, 255, 0.95); color: #333; border-radius: 10px; padding: 12px 15px; margin-bottom: 10px; font-size: 0.95rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); animation: slideIn 0.3s ease; transition: transform 0.2s ease; }
    .task-item:hover { transform: translateX(5px); }
    .status-box { background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 12px; padding: 20px; text-align: center; font-size: 1rem; font-weight: 500; box-shadow: 0 8px 16px rgba(0,0,0,0.2); }
    .modal-content { border-radius: 20px; border: none; }
    .modal-header { background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 20px 20px 0 0; border: none; }
    .modal-title { font-weight: 700; }
    .btn-close { filter: brightness(0) invert(1); }
    .form-control { border-radius: 10px; border: 2px solid #e0e0e0; padding: 12px 15px; transition: all 0.3s ease; }
    .form-control:focus { border-color: #667eea; box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25); }
    .modal-footer { border: none; padding-top: 0; }
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
    @media (max-width: 1200px) { .content-wrapper { grid-template-columns: 1fr; } .processors-container { grid-template-columns: 1fr; } }
    @media (max-width: 576px) { .header h1 { font-size: 1.8rem; } .btn-modern { font-size: 0.9rem; padding: 10px; } }
  </style>
</head>
<body>

<div class="main-container">
  <div class="header">
    <h1>BSOFT DPU SIMULATOR</h1>
    <p>DistribuiÃ§Ã£o inteligente de tarefas entre CPU e DPU</p>
  </div>

  <div class="content-wrapper">
    <div class="card chart-card">
      <h3 class="chart-title">ðŸ“Š AnÃ¡lise de Desempenho</h3>
      <canvas id="efficiencyChart"></canvas>
    </div>

    <div>
      <div class="card">
        <div class="action-buttons">
          <button class="btn-modern btn-add" data-bs-toggle="modal" data-bs-target="#taskModal">âž• Adicionar Tarefa</button>
          <button class="btn-modern btn-process" onclick="processTasks()">âš¡ Processar</button>
          <button class="btn-modern btn-reset" onclick="resetSim()">ðŸ”„ Reiniciar</button>
        </div>

        <div class="processors-container">
          <div class="processor-card cpu-card">
            <div class="processor-title">CPU</div>
            <div id="cpuTasks"></div>
          </div>
          <div class="processor-card dpu-card">
            <div class="processor-title">DPU</div>
            <div id="dpuTasks"></div>
          </div>
        </div>

        <div class="status-box" id="statusBox">Status: Aguardando processamento...</div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="taskModal" tabindex="-1" aria-labelledby="taskModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="taskModalLabel">âž• Adicionar Nova Tarefa</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <label for="taskInput" class="form-label">Digite a tarefa:</label>
        <input type="text" id="taskInput" class="form-control" placeholder="Ex: Criptografia, TrÃ¡fego de Rede, Processamento de Dados">
        <div class="mt-3"><small class="text-muted">ðŸ’¡ Dica: Tarefas com "rede", "cript" ou "dados" serÃ£o atribuÃ­das ao DPU</small></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" onclick="addTask()">Adicionar</button>
      </div>
    </div>
  </div>
</div>

<script>
  const cpuTasks = document.getElementById('cpuTasks');
  const dpuTasks = document.getElementById('dpuTasks');
  const statusBox = document.getElementById('statusBox');
  const tasks = [];
  let cpuCount = 0;
  let dpuCount = 0;

  const ctx = document.getElementById('efficiencyChart').getContext('2d');
  const chart = new Chart(ctx, {
    type: 'bar',
    data: { labels: ['CPU', 'DPU'], datasets: [{ label: 'Tarefas Processadas', data: [0, 0], backgroundColor: ['rgba(17, 153, 142, 0.8)','rgba(238, 9, 121, 0.8)'], borderColor: ['rgba(17, 153, 142, 1)','rgba(238, 9, 121, 1)'], borderWidth: 2, borderRadius: 10 }] },
    options: { responsive: true, maintainAspectRatio: true, plugins: { legend: { display: false }, tooltip: { enabled: true, backgroundColor: 'rgba(0,0,0,0.8)', padding: 12, titleFont: { size: 14, weight: 'bold' }, bodyFont: { size: 13 } } }, scales: { y: { beginAtZero: true, precision: 0, grid: { color: 'rgba(0,0,0,0.05)' }, ticks: { font: { size: 12, weight: '500' } } }, x: { grid: { display: false }, ticks: { font: { size: 13, weight: 'bold' } } } } }
  });

  function addTask() {
    const input = document.getElementById('taskInput');
    const task = input.value.trim();
    if (!task) return;
    tasks.push(task);
    cpuTasks.innerHTML += `<div class="task-item">${task}</div>`;
    input.value = '';
    statusBox.textContent = 'Status: Tarefas adicionadas, pronto para processar.';
    const modal = bootstrap.Modal.getInstance(document.getElementById('taskModal'));
    modal.hide();
  }

  document.getElementById('taskInput').addEventListener('keypress', function(e) { if (e.key === 'Enter') addTask(); });

  function processTasks() {
    cpuTasks.innerHTML = '';
    dpuTasks.innerHTML = '';
    cpuCount = 0; dpuCount = 0;
    tasks.forEach(task => {
      if (task.toLowerCase().includes('rede') || task.toLowerCase().includes('cript') || task.toLowerCase().includes('dados')) { dpuTasks.innerHTML += `<div class="task-item">${task}</div>`; dpuCount++; } else { cpuTasks.innerHTML += `<div class="task-item">${task}</div>`; cpuCount++; }
    });
    chart.data.datasets[0].data = [cpuCount, dpuCount]; chart.update();
    statusBox.textContent = `Status: Processamento concluÃ­do! CPU: ${cpuCount} tarefas, DPU: ${dpuCount} tarefas.`;
  }

  function resetSim() {
    cpuTasks.innerHTML = ''; dpuTasks.innerHTML = ''; tasks.length = 0; cpuCount = 0; dpuCount = 0;
    chart.data.datasets[0].data = [0,0]; chart.update();
    statusBox.textContent = 'Status: Aguardando processamento...';
  }
</script>

</body>
</html>
